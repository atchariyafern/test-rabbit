import clsx from 'clsx';
import React from 'react';
import { Tooltip } from 'react-tippy';
import QuestionIcon from '../../public/icons/common/question-circle.svg';

import style from './HelpTool.module.scss';

// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types
const HelpTool = ({
  t,
  tip,
  alwaysShowIcon = false,
  zIndex = 3,
  position = 'bottom-end',
}) => (
  <div
    data-testid="help-tool"
    className="small ml-2 ml-lg-0 text-primary"
    role="button"
  >
    {/* We need to 2 tooltip blocks because tooltip position is not render correctly for both positioning */}
    <div className={clsx(['d-none', !alwaysShowIcon && 'd-lg-block'])}>
      <Tooltip
        data-testid="help-tooltip"
        title={tip.replace(/\n/g, '<br>')}
        position="bottom-start"
        trigger="click"
        arrow
        theme="blue" // override default styles
        zIndex={zIndex} // override default z-index for overlapping issues with sticky bar everywhere
      >
        <span>{t('common:tooltip_label')}</span>
      </Tooltip>
    </div>

    <div
      className={clsx([
        style.helpTool,
        'd-inline-block',
        !alwaysShowIcon && 'd-lg-none',
      ])}
    >
      <Tooltip
        data-testid="help-tooltip"
        title={tip.replace(/\n/g, '<br>')}
        position={position}
        trigger="click"
        arrow
        theme="blue" // override default styles
        zIndex={zIndex} // override default z-index for overlapping issues with sticky bar everywhere
      >
        <QuestionIcon width="16" height="16" />
      </Tooltip>
    </div>
  </div>
);

export default HelpTool;
